# R repository
sudo add-apt-repository --yes "deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/"
wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/marutter_pubkey.asc | sudo tee -a /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc
sudo add-apt-repository --yes ppa:c2d4u.team/c2d4u4.0+


# repository for GPU drivers
wget -O /tmp/arbutus-cloud-repo_all.deb http://repo.arbutus.cloud.computecanada.ca/pulp/deb/ubuntu22/pool/main/arbutus-cloud-repo_0.1_all.deb
sudo dpkg -i /tmp/arbutus-cloud-repo_all.deb 

# update and reboot
sudo apt-get update
sudo apt-get dist-upgrade
sudo apt-get autoremove
sudo reboot

# install drivers
sudo apt-get -y install nvidia-vgpu-kmod nvidia-vgpu-tools nvidia-vgpu-gridd
sudo reboot

# install and check opencl
lspci -kv
nvidia-smi
sudo apt-get install --yes opencl-headers ocl-icd-opencl-dev clinfo
clinfo


sudo apt-get --yes install r-cran-devtools r-cran-rcppeigen r-cran-bh r-cran-testthat r-cran-knitr r-cran-assertive 


devtools::install_github("eborgnine/gpuR")
devtools::install_github("ruoyongxu/clrng")
 